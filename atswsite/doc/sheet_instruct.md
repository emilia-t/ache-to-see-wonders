# ðŸ“ é€šä¿¡æŒ‡ä»¤ç»“æž„è®¾è®¡ç›¸å…³

ç”¨äºŽè®°å½•é€šä¿¡æŒ‡ä»¤ç»“æž„è®¾è®¡ç›¸å…³ã€‚

|ä¿®è®¢| é€‚èŒƒå›´ |           æè¿°        |      $type           |    #class    |    conveyor   |      time(ç¤ºä¾‹)         | data                       | è¿”å›žæŒ‡ä»¤          | å¤‡æ³¨         |
|---|--------|-----------------------|----------------------|--------------|---------------|------------------------|----------------------------|-------------------|--------------|
| â€” | å®¢æˆ·   |  ç”¨äºŽæ£€æµ‹ç½‘ç»œè¿žæŽ¥å»¶è¿Ÿ   | [ping](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#ping-%E6%8C%87%E4%BB%A4)                 |       â€”      |       â€”       |'2023-03-26 15:55:45:214'|             â€”              |$pong             |â€”             |
| â€” | æœåŠ¡ç«¯ |  ç”¨äºŽæ£€æµ‹ç½‘ç»œè¿žæŽ¥å»¶è¿Ÿ   | [pong](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#pong-%E6%8C%87%E4%BB%A4)                 |       â€”      |       â€”       |'2023-03-26 15:55:45:214'|             â€”              |â€”                 |â€”             |
| â€” | å®¢æˆ·   |  ç”¨äºŽèŽ·å–æœåŠ¡ç«¯RSAå…¬é’¥  | [get_publickey](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#get_publickey-%E6%8C%87%E4%BB%A4)        |       â€”      |       â€”       |'2023-03-26 15:55:45:214'|             â€”              |$publickey        |â€”             |
| â€” | æœåŠ¡ç«¯ |  ç”¨äºŽå‘é€æœåŠ¡ç«¯RSAå…¬é’¥  | [publickey](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#publickey-%E6%8C%87%E4%BB%A4)            |       â€”      |       â€”       |'2023-03-26 15:55:45:214'|'RSA_publickey'             |â€”                 |â€”             |
| â€” | å®¢æˆ·   |  ç”¨äºŽç™»å½•è´¦å·          | [get_login](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#get_login-%E6%8C%87%E4%BB%A4)            |       â€”      |       â€”       |'2023-03-26 15:55:45:214'| è¯¦è§:è¯¦ç»†æŒ‡ä»¤ç»“æž„            |$login            |â€”             |
| â€” | æœåŠ¡ç«¯ |  ç”¨äºŽç™»å½•è´¦å·          | [login](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#login-%E6%8C%87%E4%BB%A4)                |       â€”      |       â€”       |'2023-03-26 15:55:45:214'|'ok'                        |â€”                 |â€”             |
| â€” | å®¢æˆ·   |  ç”¨äºŽç™»å½•åŒ¿åè´¦å·      | [get_anonymous_login](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#get_anonymous_login-%E6%8C%87%E4%BB%A4)  |       â€”      |       â€”       |'2023-03-26 15:55:45:214'| è¯¦è§:è¯¦ç»†æŒ‡ä»¤ç»“æž„            |$anonymous_login  |â€”             |
| â€” | æœåŠ¡ç«¯ |  ç”¨äºŽç™»å½•åŒ¿åè´¦å·      | [anonymous_login](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#anonymous_login-%E6%8C%87%E4%BB%A4)      |       â€”      |       â€”       |'2023-03-26 15:55:45:214'|'ok'                        |â€”                 |â€”             |
| â€” | å®¢æˆ·   |  ç”¨äºŽç™»å½•åŒ¿åè´¦å·      | [get_server_config](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#get_server_config-%E6%8C%87%E4%BB%A4)    |       â€”      |       â€”       |'2023-03-26 15:55:45:214'|             â€”              |$anonymous_login  |â€”             |
| â€” | æœåŠ¡ç«¯ |  ç”¨äºŽç™»å½•åŒ¿åè´¦å·      | [server_config](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#server_config-%E6%8C%87%E4%BB%A4)        |       â€”      |       â€”       |'2023-03-26 15:55:45:214'| è¯¦è§:è¯¦ç»†æŒ‡ä»¤ç»“æž„            |â€”                 |â€”             |
| â€” | å®¢æˆ·   |  ç”¨äºŽèŽ·å–è´¦å·æ•°æ®      | [get_user_data](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#get_user_data-%E6%8C%87%E4%BB%A4)    |       â€”      |       â€”       |'2023-03-26 15:55:45:214'|             â€”              |$user_data         |â€”             |
| â€” | æœåŠ¡ç«¯ |  ç”¨äºŽèŽ·å–è´¦å·æ•°æ®      | [user_data](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#user_data-%E6%8C%87%E4%BB%A4)        |       â€”      |       â€”       |'2023-03-26 15:55:45:214'| è¯¦è§:è¯¦ç»†æŒ‡ä»¤ç»“æž„            |â€”                 |â€”             |
| â€” | å®¢æˆ·   |  ç”¨äºŽä½¿ç”¨Tokenç™»å½•      | [get_token_login](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#get_token_login-%E6%8C%87%E4%BB%A4)    |       â€”      |       â€”       |'2023-03-26 15:55:45:214'| è¯¦è§:è¯¦ç»†æŒ‡ä»¤ç»“æž„            |$token_login         |â€”             |
| â€” | æœåŠ¡ç«¯ |  ç”¨äºŽä½¿ç”¨Tokenç™»å½•      | [token_login](https://github.com/emilia-t/ache-to-see-wonders/blob/master/atswsite/doc/sheet_instruct.md#token_login-%E6%8C%87%E4%BB%A4)        |       â€”      |       â€”       |'2023-03-26 15:55:45:214'| 'ok'            |â€”                 |â€”             |

## å»ºç«‹è¿žæŽ¥è¿‡ç¨‹
- **wss**ï¼š
  ```js
    const instructPipe = new Instruct("wss://example.com:2424");//åˆ›å»ºæŒ‡ä»¤ç®¡é“
    //å½“åˆ›å»º Instruct åŽä¼šåšä¸‹é¢çš„äº‹æƒ… å…·ä½“ä»£ç ä»¥ Instruct.ts ä¸ºå‡†
    this.url = url;
    this.socket = new WebSocket(this.url);
    this.socket.onmessage=(ev)=>this.onMessageHandler(ev);
    this.socket.onopen=(ev)=>onOpenHandler(ev);
    this.socket.onclose=(ev)=>this.onCloseHandler(ev);
    this.socket.onerror=(ev)=>this.onErrorHandler(ev);

## è¯¦ç»†æŒ‡ä»¤ç»“æž„

### ping æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "ping",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": ""
  }
### pong æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "pong",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": ""
  }
### get_publickey æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "get_publickey",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": ""
  }
### publickey æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "publickey",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": "-----BEGIN CERTIFICATE-----MIIGLDB8O2oVwyEsu+h86nn4-----END CERTIFICATE-----"
  }
### get_login æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "get_login",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": {
      "email": "account and password need encryption(ues server publickey)",
      "password": "account and password need encryption(ues server publickey)",
    }
  }
### login æŒ‡ä»¤
- **å®Œæ•´ç»“æž„(data value either 'ok' or 'no')**ï¼š
  ```json
  {
    "type": "login",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": "ok"
  }
### get_anonymous_login æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "get_anonymous_login",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": {
      "email": "any@anonymous"
    }
  }
### anonymous_login æŒ‡ä»¤
- **å®Œæ•´ç»“æž„(data value either 'ok' or 'no')**ï¼š
  ```json
  {
    "type": "anonymous_login",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": "ok"
  }
### get_server_config æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "get_server_config",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": ""
  }
### server_config æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "server_config",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": {
      "version":"1.0.0",
      "anonymous_login":false,
      "key":"k0",
      "url":"wss://example.com:2424",
      "name":"game server",
      "online_number":0,
      "max_online":100
    }
  }
### get_user_data æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "get_user_data",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": ""
  }
### user_data æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "user_data",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": {
      "id":1,
      "anonymous_user":false,
      "email":"test@qq.com",
      "password":"",
      "name":"test",
      "qq":1234567890,
      "theme_color":"rgba(255,255,255,1)",
      "head_img":"none"
    }
  }
### get_token_login æŒ‡ä»¤
- **å®Œæ•´ç»“æž„**ï¼š
  ```json
  {
    "type": "get_token_login",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": {
      "user_id": 1,
      "token": "abcdjsldjfdhlsdjf"
    }
  }
### token_login æŒ‡ä»¤
- **å®Œæ•´ç»“æž„(data value either 'ok' or 'no')**ï¼š
  ```json
  {
    "type": "token_login",
    "class": "",
    "conveyor": "",
    "time": "2023-03-26 15:55:45:214",
    "data": "ok"
  }